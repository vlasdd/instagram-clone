"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[923],{1273:function(e,n,t){var s=t(2791),r=t(3213),o=t(4874),c=t(184),i=s.memo((function(e){var n=e.children,t=e.closeEvent,i=e.styles;(0,s.useEffect)((function(){return document.body.classList.add("overflow-hidden"),function(){return document.body.classList.remove("overflow-hidden")}}),[]);var l=(0,s.useCallback)((function(e){e.stopPropagation(),t()}),[]),a=(0,s.useCallback)((function(e){e.stopPropagation()}),[]);return(0,c.jsxs)("div",{className:"w-screen h-screen bg-[rgba(0,0,0,0.6)] fixed top-0 left-0 flex items-center justify-center z-50",onClick:l,children:[(0,c.jsx)(r.E.div,{className:"".concat(i.includes("w-")?"":"w-64 sm:w-96"," absolute flex flex-col bg-white rounded-xl z-50 ").concat(i),initial:{scale:1.2},animate:{scale:1},transition:{duration:.12},onClick:a,children:n}),(0,c.jsx)("div",{className:"absolute top-4 right-4 cursor-pointer",children:(0,c.jsx)(o.Z,{styles:"w-[25px] h-[25px] text-white"})})]})}));n.Z=i},4066:function(e,n,t){var s=t(1413),r=t(2791),o=t(3213),c=t(184),i=r.memo((function(e){var n=e.children,t=e.closeEvent,r=e.styles,i=e.noAnimation;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"w-screen h-screen fixed top-0 left-0",onClick:t}),(0,c.jsx)(o.E.div,(0,s.Z)((0,s.Z)({className:"bg-white flex items-center rounded-lg drop-shadow-md absolute flex-col z-50 ".concat(r)},i?{}:{initial:{y:-50},animate:{y:0},exit:{y:50}}),{},{children:n}))]})}));n.Z=i},9688:function(e,n,t){var s=t(2791),r=t(6756),o=t(184),c=s.memo((function(e){var n=e.imageStyles,t=e.firstTextStyles,s=e.secondTextStyles,c=e.margin;return(0,o.jsx)("div",{className:"flex px-[2px] pr-6 items-center justify-center py-1 ".concat(c||""),children:(0,o.jsxs)("div",{className:"w-full py-[0.5px] flex items-center px-3",children:[(0,o.jsx)(r.m_,{color:"#E5E7EB",style:n}),(0,o.jsxs)("div",{className:"w-[calc(100%-70px)] mt-1 gap-2 h-5/6 flex flex-col justify-center",children:[(0,o.jsx)(r.m_,{color:"#E5E7EB",style:t}),(0,o.jsx)(r.m_,{color:"#E5E7EB",style:s})]})]})})}));n.Z=c},1641:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var s=t(1273),r=t(885),o=t(2791),c=t(6871),i=t(9110),l=t(184),a=function(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})},u=function(){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})},d=t(7018),m=o.memo((function(e){var n=e.currentIndex,t=e.posts,s=(e.routePart,(0,c.s0)()),r=(0,d.Z)(),m=(0,o.useCallback)((function(){s("../".concat(i.Z.POST).concat(t[n-1].postId),{replace:!0})}),[n]),f=(0,o.useCallback)((function(){s("../".concat(i.Z.POST).concat(t[n+1].postId),{replace:!0})}),[n]);return(0,l.jsxs)(l.Fragment,{children:[0!==n?(0,l.jsx)("button",{className:"\n                            w-8 h-8 rounded-full bg-white absolute flex justify-center items-center top-[46%] \n                            ".concat(r<640?"left-[calc(100%+8px)]":"left-[calc(100%+15px)]"," \n                        "),onClick:m,children:(0,l.jsx)(u,{})}):null,n!==t.length-1?(0,l.jsx)("button",{className:"\n                            w-8 h-8 rounded-full bg-white absolute flex justify-center items-center top-[46%] \n                            ".concat(r<640?"right-[calc(100%+8px)]":"right-[calc(100%+15px)]"," \n                        "),onClick:f,children:(0,l.jsx)(a,{})}):null]})})),f=t(1518),x=t(5427),h=function(){return(0,c.bx)()},p=t(4219),g=t(9688),v=t(83),w=t(349),j=t(4285),k=t(1743),I=o.memo((function(e){var n=e.userInfo,t=(0,k.C)((function(e){return e.signedUser.user})),i=(0,k.T)(),a=(0,c.s0)(),u=(0,c.UO)().uid,d=(0,o.useState)(!1),m=(0,r.Z)(d,2),f=m[0],x=m[1],h=(0,o.useCallback)((function(e){e.stopPropagation(),x(!0)}),[]),I=(0,o.useCallback)((function(e){e.stopPropagation(),i((0,w.Z)({userId:n.userId,uid:u}))}),[n.userId,u]),b=(0,o.useCallback)((function(){x(!1),i((0,j.Z)({userId:n.userId,uid:u}))}),[n.userId,u]),Z=(0,o.useCallback)((function(){a(v.Z.DASHBOARD+n.userId)}),[n.userId]),y=(0,o.useCallback)((function(){x(!1)}),[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"w-full flex justify-start border-b items-center",children:[n.userId.length?(0,l.jsxs)("button",{className:"h-14 py-[0.5px] gap-4 flex items-center px-3",onClick:Z,children:[(0,l.jsx)("img",{src:n.profileImage.length?n.profileImage:"/instagram-clone/images/default-avatar-image.jpg",className:"h-9 w-9 rounded-full object-cover"}),(0,l.jsx)("p",{className:"font-medium text-[14px] tracking-wide whitespace-nowrap",children:n.username})]}):(0,l.jsx)(g.Z,{imageStyles:{width:36,height:36,borderRadius:"50%"},firstTextStyles:{width:100,height:7,borderRadius:"10px"},secondTextStyles:{width:80,height:7,borderRadius:"10px"},margin:"my-1"}),t.userId!==n.userId&&n.userId.length?(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("p",{children:"\u2022"}),t.following.some((function(e){return e.userId===n.userId}))?(0,l.jsx)("button",{className:"rounded text-gray-800 text-sm font-medium cursor-pointer",onClick:h,children:"Following"}):(0,l.jsx)("button",{className:"font-medium text-cyan-500 rounded cursor-pointer text-sm tracking-wide",onClick:I,children:"Follow"})]}):null]}),f?(0,l.jsx)(s.Z,{closeEvent:y,styles:"h-72 top-[26.5%]",children:(0,l.jsx)(p.Z,{areYouSureEvent:b,profileImage:n.profileImage,closeEvent:y,questionText:"Unfollow @".concat(n.username),buttonText:"Unfollow"})}):null]})})),b=t(1413),Z=t(5517),y=t(6302),N=t(3213),C=t(2982),P=t(5861),L=t(7757),E=t.n(L),T=t(6724),S=t(9329),R=t(930),A=function(e){var n=e.userId,t=e.postId,s=e.commentId,r=e.changePostsAdd,o=e.changePostsRemove,i=(0,k.C)((function(e){return e.signedUser.user})),l=(0,k.T)(),a=(0,c.UO)().uid,u=function(){var e=(0,P.Z)(E().mark((function e(){var o,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.QT)((0,T.JU)(S.db,"users",n));case 2:return o=e.sent.data().posts,c=o.map((function(e){return e.postId===t?(0,b.Z)((0,b.Z)({},e),{},{comments:e.comments.map((function(e){return e.commentId===s?(0,b.Z)((0,b.Z)({},e),{},{likes:[].concat((0,C.Z)(e.likes),[{userId:i.userId}])}):e}))}):e})),r&&r(),e.next=7,l((0,R.Z)({userId:n,newPosts:c,uid:a}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,P.Z)(E().mark((function e(){var r,c;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.QT)((0,T.JU)(S.db,"users",n));case 2:return r=e.sent.data().posts,c=r.map((function(e){return e.postId===t?(0,b.Z)((0,b.Z)({},e),{},{comments:e.comments.map((function(e){return e.commentId===s?(0,b.Z)((0,b.Z)({},e),{},{likes:e.likes.filter((function(e){return e.userId!==i.userId}))}):e}))}):e})),o&&o(),e.next=7,l((0,R.Z)({userId:n,newPosts:c,uid:a}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{addLike:u,removeLike:d}},M=t(522),O=t(8750),B=t(4965),U=o.memo((function(e){var n=e.userId,t=e.text,i=e.likes,a=e.commentId,u=e.fromId,d=e.createdAt,m=e.changePostsAdd,f=e.changePostsRemove,x=(0,k.C)((function(e){return e.signedUser.user})),h=(0,c.s0)(),p=(0,c.UO)().postId,g=(0,B.Z)(n),w=A({userId:u,postId:p,commentId:a,changePostsAdd:m,changePostsRemove:f}),j=w.addLike,I=w.removeLike,C=(0,o.useState)(!1),P=(0,r.Z)(C,2),L=P[0],E=P[1],T=(0,o.useCallback)((function(){var e=(0,M.Z)(d);return"Now"===e?e:e.split(" ")[0]+e.split(" ")[1][0]}),[d]),S=(0,o.useCallback)((function(){h(v.Z.DASHBOARD+n)}),[n]),R=(0,o.useCallback)((function(){E(!0)}),[]),U=(0,o.useCallback)((function(){E(!1)}),[]);return g.userId.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex w-full justify-between items-start",children:[(0,l.jsxs)("div",{className:"flex w-[calc(100%-30px)] gap-4",children:[(0,l.jsx)("button",{className:"h-12 py-[0.5px] flex items-center",onClick:S,children:(0,l.jsx)("img",{src:g.profileImage.length?g.profileImage:"/instagram-clone/images/default-avatar-image.jpg",className:"h-9 w-9 rounded-full object-cover"})}),(0,l.jsxs)("div",{className:"flex flex-col w-[calc(100%-52px)]",children:[(0,l.jsx)("div",{className:"inline-block pt-3",children:(0,l.jsxs)("p",{className:"break-words text-[14px]",children:[(0,l.jsx)("span",{className:"font-medium text-sm tracking-wide whitespace-nowrap cursor-pointer",onClick:S,children:g.username}),(0,l.jsx)("span",{className:"ml-2",children:t})]})}),(0,l.jsxs)("div",{className:"flex gap-2 text-xs text-gray-400",children:[(0,l.jsx)("p",{children:T()}),(0,l.jsx)("button",{onClick:R,children:(0,l.jsx)("p",{className:"font-medium",children:"".concat(i.length," like").concat(1===i.length?"":"s")})})]})]})]}),(0,l.jsx)("div",{className:"flex items-center justify-center h-[42px] w-[20px]",children:(0,l.jsx)(N.E.div,(0,b.Z)((0,b.Z)({onClick:function(){i.some((function(e){return e.userId===x.userId}))?I():j()},className:"h-[15px] w-[15px] cursor-pointer"},i.every((function(e){return e.userId!==x.userId}))?{whileTap:{width:"50px",height:"50px",transition:{repeat:1,repeatType:"reverse",duration:.5}}}:{}),{},{children:i.some((function(e){return e.userId===x.userId}))?(0,l.jsx)(y.Z,{styles:"h-full w-full text-red-500"}):(0,l.jsx)(Z.Z,{styles:"h-full w-full",includeHovering:!0})}))})]}),L?(0,l.jsx)(s.Z,{closeEvent:U,styles:"h-96 top-[20%]",children:(0,l.jsx)(O.Z,{descriptionLine:"Likes",usersList:i,closeEvent:U})}):null]}):(0,l.jsx)("div",{className:"h-12 w-full flex items-center justify-start gap-2",children:(0,l.jsx)("div",{style:{borderTopColor:"transparent"},className:"w-[36px] h-[36px] border-[3px] border-gray-700 border-dashed rounded-full animate-spin"})})})),F=o.memo((function(e){var n=e.currentPost,t=e.userInfo,s=e.changePostsAdd,r=e.changePostsRemove,i=(0,c.s0)(),a=(0,o.useMemo)((function(){return n.comments.map((function(e,n){return(0,o.createElement)(U,(0,b.Z)((0,b.Z)({changePostsAdd:function(){return s(e.commentId)},changePostsRemove:function(){return r(e.commentId)}},e),{},{fromId:t.userId,key:n}))}))}),[n.comments,t.userId]),u=(0,o.useCallback)((function(){i(v.Z.DASHBOARD+t.userId)}),[t.userId]);return(0,l.jsx)("div",{className:"w-full h-[calc(100%-120px)] sm:h-[calc(100%-180px)] px-3 flex flex-col items-start overflow-hidden overflow-y-auto no-bar",children:t.userId.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex w-full gap-4",children:[(0,l.jsx)("button",{className:"h-12 py-[0.5px] flex items-center",onClick:u,children:(0,l.jsx)("img",{src:t.profileImage.length?t.profileImage:"/instagram-clone/images/default-avatar-image.jpg",className:"h-9 w-9 rounded-full object-cover"})}),(0,l.jsx)("div",{className:"inline-block w-[calc(100%-52px)] pt-3",children:(0,l.jsxs)("p",{className:"break-words text-[14px]",children:[(0,l.jsx)("span",{className:"font-medium text-sm tracking-wide whitespace-nowrap cursor-pointer",onClick:u,children:t.username}),(0,l.jsx)("span",{className:"ml-2",children:n.text})]})})]}),a]}):(0,l.jsx)(g.Z,{imageStyles:{width:36,height:36,borderRadius:"50%"},firstTextStyles:{width:100,height:7,borderRadius:"10px"},secondTextStyles:{width:80,height:7,borderRadius:"10px"},margin:"my-1 ml-[-12px]"})})})),W=t(2659),z=function(e,n){var t=(0,k.C)((function(e){return e.signedUser.user}));return{addLikeToPost:(0,o.useCallback)((function(){e&&e((function(e){return e.map((function(e){return e.postId===n?(0,b.Z)((0,b.Z)({},e),{},{likes:[].concat((0,C.Z)(e.likes),[{userId:t.userId}])}):e}))}))}),[e,n]),removeLikeFromPost:(0,o.useCallback)((function(){e&&e((function(e){return e.map((function(e){return e.postId===n?(0,b.Z)((0,b.Z)({},e),{},{likes:e.likes.filter((function(e){return e.userId!==t.userId}))}):e}))}))}),[e,n]),addLikeToComment:(0,o.useCallback)((function(s){e&&e((function(e){return e.map((function(e){return e.postId===n?(0,b.Z)((0,b.Z)({},e),{},{comments:e.comments.map((function(e){return e.commentId===s?(0,b.Z)((0,b.Z)({},e),{},{likes:[].concat((0,C.Z)(e.likes),[{userId:t.userId}])}):e}))}):e}))}))}),[e,n]),removeLikeFromComment:(0,o.useCallback)((function(s){e&&e((function(e){return e.map((function(e){return e.postId===n?(0,b.Z)((0,b.Z)({},e),{},{comments:e.comments.map((function(e){return e.commentId===s?(0,b.Z)((0,b.Z)({},e),{},{likes:e.likes.filter((function(e){return e.userId!==t.userId}))}):e}))}):e}))}))}),[e,n])}},H=o.memo((function(){var e=h(),n=e.posts,t=e.changePosts,s=(0,o.useRef)(null),a=(0,c.UO)().postId,u=(0,c.TH)(),p=(0,o.useMemo)((function(){return n.find((function(e){return(null===e||void 0===e?void 0:e.postId)===a}))}),[n,a]),g=(0,o.useMemo)((function(){return n.indexOf(p)}),[n,p]),v=(0,o.useState)(""),w=(0,r.Z)(v,2),j=w[0],k=w[1],b=(0,d.Z)(),Z=(0,B.Z)(null===p||void 0===p?void 0:p.fromId),y=z(t,a),N=y.addLikeToPost,C=y.removeLikeFromPost,P=y.addLikeToComment,L=y.removeLikeFromComment,E=(0,o.useCallback)((function(){var e=u.pathname.split("/");return e.slice(0,e.indexOf(i.Z.POST)-1).join("/")}),[u.pathname]);return p&&n?(0,l.jsxs)("div",{className:"w-full h-full flex flex-col sm:flex-row relative",children:[b<641?(0,l.jsx)(I,{userInfo:Z}):null,(0,l.jsx)("div",{className:"\n                    w-full sm:w-3/5 bg-black h-1/3 sm:h-full flex items-center justify-center overflow-hidden\n                    ".concat(b>640?"rounded-l-xl":"","\n                "),children:(0,l.jsx)("img",{src:p.postImage,className:"h-full w-full object-contain"})}),(0,l.jsxs)("div",{className:"w-full h-2/3 sm:h-full sm:w-2/5 flex flex-col justify-between",children:[b>640?(0,l.jsx)(I,{userInfo:Z}):null,(0,l.jsx)(F,{currentPost:p,userInfo:Z,changePostsAdd:P,changePostsRemove:L}),(0,l.jsx)(x.Z,{currentPost:p,commentsRef:s,changePostsAdd:N,changePostsRemove:C}),(0,l.jsx)(W.Z,{createdAt:p.createdAt}),(0,l.jsx)(f.Z,{wordEntering:j,setWordEntering:k,commentsRef:s,currentPost:p,changePosts:t})]}),(0,l.jsx)(m,{currentIndex:g,posts:n,routePart:E})]}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)("img",{src:"/instagram-clone/images/loading-logo.jpg",className:"h-28"})})})),D=function(){var e=(0,c.s0)(),n=(0,o.useCallback)((function(){e(-1)}),[]);return(0,l.jsx)(s.Z,{closeEvent:n,styles:"w-[75%] sm:w-5/6 h-[80%] lg:h-[90%] top-[10%] lg:top-[5%]",children:(0,l.jsx)(H,{})})}},7018:function(e,n,t){var s=t(885),r=t(2791);n.Z=function(){var e=(0,r.useState)(window.innerWidth),n=(0,s.Z)(e,2),t=n[0],o=n[1];return(0,r.useEffect)((function(){window.addEventListener("resize",(function(){o(window.innerWidth)}))}),[]),t}},213:function(e,n,t){var s=t(5861),r=t(7757),o=t.n(r),c=t(6724),i=t(9329),l=function(){var e=(0,s.Z)(o().mark((function e(n,t){var s,r,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=3;break}return t([]),e.abrupt("return");case 3:return s=(0,c.hJ)(i.db,"users"),r=(0,c.IO)(s,(0,c.ar)("username",">=",n),(0,c.ar)("username","<=",n+"~")),e.next=7,(0,c.PL)(r);case 7:l=e.sent,t(l.docs.map((function(e){return e.data()})));case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();n.Z=l},4874:function(e,n,t){t(2791);var s=t(184);n.Z=function(e){var n=e.styles;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}},4850:function(e,n,t){var s=t(885),r=t(2791),o=t(184);n.Z=function(e){var n=e.styles,t=e.includeHovering,c=(0,r.useState)(!1),i=(0,s.Z)(c,2),l=i[0],a=i[1];return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"".concat(n," ").concat(t&&l&&"text-gray-500"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})}},8029:function(e,n,t){var s=t(885),r=t(2791),o=t(184);n.Z=function(e){var n=e.styles,t=e.includeHovering,c=(0,r.useState)(!1),i=(0,s.Z)(c,2),l=i[0],a=i[1];return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"".concat(n," ").concat(t&&l&&"text-gray-500"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})}},7042:function(e,n,t){t(2791);var s=t(184);n.Z=function(e){var n=e.styles;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}}}]);
//# sourceMappingURL=923.333e387e.chunk.js.map